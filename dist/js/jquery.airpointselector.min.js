!function(a){var b=new function(){currentInputText=null,this.functionalKeyArray=[9,20,13,16,17,18,91,92,93,45,36,33,34,35,37,39,112,113,114,115,116,117,118,119,120,121,122,123,144,19,145,40,38,27],this.holdText=null,this.init=function(){a("body").append("<div id='airPointselector' class='airpointselector-layout'></div>"),a(document).bind("mousedown",function(c){var d=a(c.target);d.parents().andSelf().is("#airPointselector")||d.is(a(currentInputText))||b.hideSelector()}),a("#airPointselector").delegate("tr","mouseover",function(){a("#airPointselector tr").removeClass("ct"),a(this).addClass("ct")}).delegate("tr","mouseout",function(){a("#airPointselector tr").removeClass("ct")}),a("#airPointselector").delegate("tr","click",function(){a(currentInputText).val(a(this).find("div:last").html());var c=a(currentInputText).data("config").callback;"none"!=a("#airPointselector").css("display")&&c&&a.isFunction(c)&&c(a(this).data("jsonData")),b.hideSelector()})},this.selector=function(c){function d(c){if(null==c||c.length<=0)return void b.hideSelector();for(var d="<table><tbody>",e=0;e<c.length;e++)d+="<tr><td><div>"+c[e].airpoint+"</div></td></tr>";d+="</tbody></table>",i.html(d),i.find("tr:first").addClass("ct"),i.find("tr:odd").addClass("odd"),i.show(),i.find("tr").each(function(b){a(this).data("jsonData",c[b])})}function e(a,b){for(var c=new Array,d=0;d<a.length;d++)f(a[d].airpoint,b)&&c.push(a[d]);return c}function f(a,b){return b=b.replace(/\\/g,"\\\\").replace("(","\\(").replace(")","\\)").replace("*","\\*").replace(".","\\.").replace("?","\\?").replace("+","\\+").replace("$","\\$").replace("^","\\^").replace("[","\\[").replace("]","\\]").replace("{","\\{").replace("}","\\}").replace("|","\\|").replace("/","\\/"),0==a.toUpperCase().indexOf(b.toUpperCase())||a.toUpperCase().match(b.toUpperCase())?!0:!1}function g(b){var c=b.currentTarget,f=a(c).data("config"),g=a(c).offset();f.width<=0&&(f.width=a(c).outerWidth()-2),i.width(f.width);var h=a(c).outerHeight();i.css({top:g.top+h,left:g.left});var j=f.data,k=f.url;if(null!=j&&a.isArray(j)){var l=a.trim(a(c).val());if(""!=l)d(e(j,l));else{for(var m=new Array,n=0;n<j.length;n++)m.push(j[n]);d(m)}}else null!=k&&""!=k&&a.post(k,{},function(a){d(a.data)},"json");i.scrollTop(0)}a("body").length>0&&a("#airPointselector").length<=0&&b.init();var h=this,i=a("#airPointselector");this.config={width:0,url:null,data:null,callback:null},a.extend(this.config,c),h.data("config",this.config),h.unbind("keydown").keydown(function(c){var d=c.currentTarget;switch(c.keyCode){case 40:if("none"==i.css("display"))return;var e=i.find(".ct");e=e.length<=0?i.find("tr:first"):e.next(),i.find("tr").removeClass("ct"),e.length>0?(e.addClass("ct"),a(d).val(e.find("div:last").html()),i.scrollTop(e[0].offsetTop-i.height()+e.height())):a(d).val(b.holdText);break;case 38:if("none"==i.css("display"))return;var f=i.find(".ct");f=f.length<=0?i.find("tr:last"):f.prev(),i.find("tr").removeClass("ct"),f.length>0?(f.addClass("ct"),a(d).val(f.find("div:last").html()),i.scrollTop(f[0].offsetTop-i.height()+f.height())):a(d).val(b.holdText);break;case 27:b.hideSelector();break;case 9:if("none"==i.css("display"))return;var g=i.find(".ct");g.length>0&&a(currentInputText).val(g.text());var h=a(d).data("config").callback;"none"!=i.css("display")&&(h&&a.isFunction(h)&&h(i.find(".ct").data("jsonData")),b.hideSelector())}}),h.unbind("keyup").keyup(function(c){for(var f=c.keyCode,h=c.currentTarget,j=c.ctrlKey,k=!1,l=0;l<b.functionalKeyArray.length;l++)if(f==b.functionalKeyArray[l]){k=!0;break}if(!k&&(!j||j&&67==f||j&&88==f)){var m=a(h).data("config"),n=a(h).offset();m.width<=0&&(m.width=a(h).outerWidth()-2),i.width(m.width);var o=a(h).outerHeight()-1;i.css({top:n.top+o,left:n.left});var p=m.data,q=m.url,r=a.trim(a(h).val());if(null==r||""==r)return void g(c);null!=q&&""!=q?a.post(q,{keyword:r},function(a){d(a.data)},"json"):d(e(p,r)),b.holdText=a(h).val()}if(13==f){if("none"==i.css("display"))return;var s=i.find(".ct");s.length>0&&a(currentInputText).val(s.text());var t=a(h).data("config").callback;"none"!=i.css("display")&&(t&&a.isFunction(t)&&t(i.find(".ct").data("jsonData")),b.hideSelector())}}),h.focus(function(a){currentInputText=a.currentTarget,g(a)})},this.hideSelector=function(){var b=a("#airPointselector");"none"!=b.css("display")&&(b.find("tr").removeClass("ct"),b.hide())}};a.fn.airPointselector=b.selector}(jQuery);
/*! build time: 2015-11-24 */